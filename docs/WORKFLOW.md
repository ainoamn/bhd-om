# سير العمل للتطوير على أكثر من جهاز
# Multi-Computer Development Workflow

## المستودع والمصدر (مهم للرفع المستقبلي)

- **GitHub:** https://github.com/ainoamn/bhd-om
- **استنساخ:** `git clone https://github.com/ainoamn/bhd-om.git`
- **الموقع في الكود:** `config/site.ts` → `siteConfig.repository`
- **عرض الرابط في الواجهة:** صفحة النسخ الاحتياطي `/admin/backup` — تظهر رابط GitHub وتذكير بالمزامنة

---

## ✅ التأكيد: العمل على أكثر من كمبيوتر

**أنت تعمل على أكثر من جهاز** — لذلك يجب:

1. **الرفع المستمر** كل 30–60 دقيقة أثناء العمل
2. **الرفع الإلزامي** قبل الانتقال لأي جهاز آخر
3. **السحب** عند بداية الجلسة على أي جهاز (`git pull origin master`)

هذا يضمن **مواصلة الجلسة على الكمبيوتر الآخر بدون انقطاع أو تأثر على العمل**.

---

## ⚠️ قاعدة ذهبية: ارفع بانتظام

**أنت تعمل على أكثر من كمبيوتر** — يجب الرفع باستمرار لكي تستطيع مواصلة الجلسة على الكمبيوتر الآخر **بدون انقطاع أو تأثر على العمل**.

### جدول المزامنة الموصى به

| التوقيت | الإجراء |
|---------|---------|
| **كل 30–60 دقيقة** أثناء العمل | `npm run sync` أو `git add -A && git commit -m "تحديثات" && git push` |
| **قبل الانتقال لجهاز آخر** | `npm run sync` **(إلزامي)** |
| **بداية الجلسة على أي جهاز** | `git pull origin master` |

---

## قبل إنهاء العمل على جهاز (إلزامي)

قبل إغلاق الجهاز أو الانتقال للعمل على كمبيوتر آخر، **يجب** تنفيذ:

```bash
git add -A
git status          # راجع التغييرات
git commit -m "وصف التغييرات"
git push origin master
```

أو باستخدام سكريبت المزامنة:

```bash
npm run sync
# أو مع رسالة مخصصة:
npm run sync -- "إضافة ميزة جديدة"
```

---

## عند البدء على جهاز جديد أو كمبيوتر آخر

```bash
cd c:\dev\bhd-om
git pull origin master
npm install         # إن لزم (بعد تحديث package.json)
npx prisma generate # إن لزم (بعد تعديل schema)
# انسخ ملف .env يدوياً إن لم يكن موجوداً
npm run dev
```

---

## سير العمل اليومي (توصية)

| المرحلة | الأمر |
|---------|-------|
| **بداية الجلسة** | `git pull origin master` |
| **أثناء العمل** | ارفع كل 30–60 دقيقة (`npm run sync`) |
| **قبل الانتقال/الإنهاء** | `git add -A && git commit -m "..." && git push` |

---

## نصائح للعمل بدون انقطاع

1. **ارفع باستمرار**: بعد كل ميزة مكتملة أو مجموعة تغييرات منطقية — لا تنتظر نهاية اليوم
2. **رسائل commit واضحة**: مثلاً "إضافة باركود العقارات" بدل "تحديثات"
3. **تجنب التعديل على نفس الملف** في جهازين مختلفين في نفس الوقت بدون رفع
4. **انسخ ملف `.env`** يدوياً إلى الجهاز الجديد (لا يُرفع لأسباب أمنية)
5. **النسخ الاحتياطي**: استخدم تصدير البيانات من `/admin/backup` وانسخها إذا كانت مهمة
6. **قاعدة البيانات**: انسخ `dev.db` يدوياً إن أردت نقل البيانات بين أجهزة (أو استورد من backup)

---

## استكشاف التعارضات (Conflicts)

إذا ظهرت رسالة تعارض عند `git pull`:

```bash
# 1. احفظ تغييراتك الحالية
git stash

# 2. اسحب التحديثات
git pull origin master

# 3. أعد تطبيق تغييراتك
git stash pop

# 4. احل التعارضات يدوياً في الملفات المعلمة، ثم:
git add -A
git commit -m "حل التعارضات"
git push
```

---

## أين يُحفظ رابط المستودع؟

للتأكد من رفع كل شيء في المستقبل، رابط المستودع موجود في:

| الموقع | الاستخدام |
|--------|-----------|
| `config/site.ts` | `siteConfig.repository.url` — يُعرض في لوحة الإدارة (صفحة النسخ الاحتياطي) |
| `package.json` | `repository.url` — قياسي لـ npm |
| `README.md` | توثيق للمطورين |
| `docs/WORKFLOW.md` | هذا الملف — سير العمل |

---

## روابط سريعة

- **المستودع:** https://github.com/ainoamn/bhd-om
- **استنساخ:** `git clone https://github.com/ainoamn/bhd-om.git`

---

## تذكير: ارفع بانتظام

> **أنت تعمل على أكثر من كمبيوتر** — ارفع كل 30–60 دقيقة وقبل الانتقال لجهاز آخر. هذا يضمن مواصلة الجلسة على الكمبيوتر الآخر بدون انقطاع أو تأثر على العمل.
