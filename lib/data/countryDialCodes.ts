/**
 * رموز فتح الخط (Dial Codes) لجميع الدول
 * يمكن البحث بالاسم (عربي/إنجليزي) أو بالرقم
 */

export interface CountryDialCode {
  code: string;
  nameAr: string;
  nameEn: string;
}

export const COUNTRY_DIAL_CODES: CountryDialCode[] = [
  { code: '93', nameAr: 'أفغانستان', nameEn: 'Afghanistan' },
  { code: '355', nameAr: 'ألبانيا', nameEn: 'Albania' },
  { code: '213', nameAr: 'الجزائر', nameEn: 'Algeria' },
  { code: '376', nameAr: 'أندورا', nameEn: 'Andorra' },
  { code: '244', nameAr: 'أنغولا', nameEn: 'Angola' },
  { code: '1264', nameAr: 'أنغويلا', nameEn: 'Anguilla' },
  { code: '1268', nameAr: 'أنتيغوا وبربودا', nameEn: 'Antigua and Barbuda' },
  { code: '54', nameAr: 'الأرجنتين', nameEn: 'Argentina' },
  { code: '374', nameAr: 'أرمينيا', nameEn: 'Armenia' },
  { code: '297', nameAr: 'أروبا', nameEn: 'Aruba' },
  { code: '61', nameAr: 'أستراليا', nameEn: 'Australia' },
  { code: '43', nameAr: 'النمسا', nameEn: 'Austria' },
  { code: '994', nameAr: 'أذربيجان', nameEn: 'Azerbaijan' },
  { code: '1242', nameAr: 'باهاماس', nameEn: 'Bahamas' },
  { code: '973', nameAr: 'البحرين', nameEn: 'Bahrain' },
  { code: '880', nameAr: 'بنغلاديش', nameEn: 'Bangladesh' },
  { code: '1246', nameAr: 'بربادوس', nameEn: 'Barbados' },
  { code: '375', nameAr: 'بيلاروسيا', nameEn: 'Belarus' },
  { code: '32', nameAr: 'بلجيكا', nameEn: 'Belgium' },
  { code: '501', nameAr: 'بليز', nameEn: 'Belize' },
  { code: '229', nameAr: 'بنين', nameEn: 'Benin' },
  { code: '1441', nameAr: 'برمودا', nameEn: 'Bermuda' },
  { code: '975', nameAr: 'بوتان', nameEn: 'Bhutan' },
  { code: '591', nameAr: 'بوليفيا', nameEn: 'Bolivia' },
  { code: '387', nameAr: 'البوسنة والهرسك', nameEn: 'Bosnia and Herzegovina' },
  { code: '267', nameAr: 'بوتسوانا', nameEn: 'Botswana' },
  { code: '55', nameAr: 'البرازيل', nameEn: 'Brazil' },
  { code: '673', nameAr: 'بروناي', nameEn: 'Brunei' },
  { code: '359', nameAr: 'بلغاريا', nameEn: 'Bulgaria' },
  { code: '226', nameAr: 'بوركينا فاسو', nameEn: 'Burkina Faso' },
  { code: '257', nameAr: 'بوروندي', nameEn: 'Burundi' },
  { code: '855', nameAr: 'كمبوديا', nameEn: 'Cambodia' },
  { code: '237', nameAr: 'الكاميرون', nameEn: 'Cameroon' },
  { code: '1', nameAr: 'كندا', nameEn: 'Canada' },
  { code: '238', nameAr: 'الرأس الأخضر', nameEn: 'Cape Verde' },
  { code: '1345', nameAr: 'جزر كايمان', nameEn: 'Cayman Islands' },
  { code: '236', nameAr: 'جمهورية أفريقيا الوسطى', nameEn: 'Central African Republic' },
  { code: '235', nameAr: 'تشاد', nameEn: 'Chad' },
  { code: '56', nameAr: 'تشيلي', nameEn: 'Chile' },
  { code: '86', nameAr: 'الصين', nameEn: 'China' },
  { code: '57', nameAr: 'كولومبيا', nameEn: 'Colombia' },
  { code: '269', nameAr: 'جزر القمر', nameEn: 'Comoros' },
  { code: '242', nameAr: 'الكونغو', nameEn: 'Congo' },
  { code: '243', nameAr: 'جمهورية الكونغو الديمقراطية', nameEn: 'DR Congo' },
  { code: '682', nameAr: 'جزر كوك', nameEn: 'Cook Islands' },
  { code: '506', nameAr: 'كوستاريكا', nameEn: 'Costa Rica' },
  { code: '385', nameAr: 'كرواتيا', nameEn: 'Croatia' },
  { code: '53', nameAr: 'كوبا', nameEn: 'Cuba' },
  { code: '357', nameAr: 'قبرص', nameEn: 'Cyprus' },
  { code: '420', nameAr: 'التشيك', nameEn: 'Czech Republic' },
  { code: '45', nameAr: 'الدنمارك', nameEn: 'Denmark' },
  { code: '253', nameAr: 'جيبوتي', nameEn: 'Djibouti' },
  { code: '1767', nameAr: 'دومينيكا', nameEn: 'Dominica' },
  { code: '1809', nameAr: 'جمهورية الدومينيكان', nameEn: 'Dominican Republic' },
  { code: '593', nameAr: 'الإكوادور', nameEn: 'Ecuador' },
  { code: '20', nameAr: 'مصر', nameEn: 'Egypt' },
  { code: '503', nameAr: 'السلفادور', nameEn: 'El Salvador' },
  { code: '240', nameAr: 'غينيا الاستوائية', nameEn: 'Equatorial Guinea' },
  { code: '291', nameAr: 'إريتريا', nameEn: 'Eritrea' },
  { code: '372', nameAr: 'إستونيا', nameEn: 'Estonia' },
  { code: '251', nameAr: 'إثيوبيا', nameEn: 'Ethiopia' },
  { code: '500', nameAr: 'جزر فوكلاند', nameEn: 'Falkland Islands' },
  { code: '298', nameAr: 'جزر فارو', nameEn: 'Faroe Islands' },
  { code: '679', nameAr: 'فيجي', nameEn: 'Fiji' },
  { code: '358', nameAr: 'فنلندا', nameEn: 'Finland' },
  { code: '33', nameAr: 'فرنسا', nameEn: 'France' },
  { code: '594', nameAr: 'غويانا الفرنسية', nameEn: 'French Guiana' },
  { code: '689', nameAr: 'بولينيزيا الفرنسية', nameEn: 'French Polynesia' },
  { code: '241', nameAr: 'الغابون', nameEn: 'Gabon' },
  { code: '220', nameAr: 'غامبيا', nameEn: 'Gambia' },
  { code: '995', nameAr: 'جورجيا', nameEn: 'Georgia' },
  { code: '49', nameAr: 'ألمانيا', nameEn: 'Germany' },
  { code: '233', nameAr: 'غانا', nameEn: 'Ghana' },
  { code: '350', nameAr: 'جبل طارق', nameEn: 'Gibraltar' },
  { code: '30', nameAr: 'اليونان', nameEn: 'Greece' },
  { code: '299', nameAr: 'غرينلاند', nameEn: 'Greenland' },
  { code: '1473', nameAr: 'غرينادا', nameEn: 'Grenada' },
  { code: '590', nameAr: 'غوادلوب', nameEn: 'Guadeloupe' },
  { code: '1671', nameAr: 'غوام', nameEn: 'Guam' },
  { code: '502', nameAr: 'غواتيمالا', nameEn: 'Guatemala' },
  { code: '224', nameAr: 'غينيا', nameEn: 'Guinea' },
  { code: '245', nameAr: 'غينيا بيساو', nameEn: 'Guinea-Bissau' },
  { code: '592', nameAr: 'غيانا', nameEn: 'Guyana' },
  { code: '509', nameAr: 'هايتي', nameEn: 'Haiti' },
  { code: '504', nameAr: 'هندوراس', nameEn: 'Honduras' },
  { code: '852', nameAr: 'هونغ كونغ', nameEn: 'Hong Kong' },
  { code: '36', nameAr: 'المجر', nameEn: 'Hungary' },
  { code: '354', nameAr: 'آيسلندا', nameEn: 'Iceland' },
  { code: '91', nameAr: 'الهند', nameEn: 'India' },
  { code: '62', nameAr: 'إندونيسيا', nameEn: 'Indonesia' },
  { code: '98', nameAr: 'إيران', nameEn: 'Iran' },
  { code: '964', nameAr: 'العراق', nameEn: 'Iraq' },
  { code: '353', nameAr: 'أيرلندا', nameEn: 'Ireland' },
  { code: '972', nameAr: 'إسرائيل', nameEn: 'Israel' },
  { code: '39', nameAr: 'إيطاليا', nameEn: 'Italy' },
  { code: '225', nameAr: 'ساحل العاج', nameEn: 'Ivory Coast' },
  { code: '1876', nameAr: 'جامايكا', nameEn: 'Jamaica' },
  { code: '81', nameAr: 'اليابان', nameEn: 'Japan' },
  { code: '962', nameAr: 'الأردن', nameEn: 'Jordan' },
  { code: '7', nameAr: 'كازاخستان', nameEn: 'Kazakhstan' },
  { code: '254', nameAr: 'كينيا', nameEn: 'Kenya' },
  { code: '686', nameAr: 'كيريباتي', nameEn: 'Kiribati' },
  { code: '383', nameAr: 'كوسوفو', nameEn: 'Kosovo' },
  { code: '965', nameAr: 'الكويت', nameEn: 'Kuwait' },
  { code: '996', nameAr: 'قيرغيزستان', nameEn: 'Kyrgyzstan' },
  { code: '856', nameAr: 'لاوس', nameEn: 'Laos' },
  { code: '371', nameAr: 'لاتفيا', nameEn: 'Latvia' },
  { code: '961', nameAr: 'لبنان', nameEn: 'Lebanon' },
  { code: '266', nameAr: 'ليسوتو', nameEn: 'Lesotho' },
  { code: '231', nameAr: 'ليبيريا', nameEn: 'Liberia' },
  { code: '218', nameAr: 'ليبيا', nameEn: 'Libya' },
  { code: '423', nameAr: 'ليختنشتاين', nameEn: 'Liechtenstein' },
  { code: '370', nameAr: 'ليتوانيا', nameEn: 'Lithuania' },
  { code: '352', nameAr: 'لوكسمبورغ', nameEn: 'Luxembourg' },
  { code: '853', nameAr: 'ماكاو', nameEn: 'Macau' },
  { code: '389', nameAr: 'مقدونيا الشمالية', nameEn: 'North Macedonia' },
  { code: '261', nameAr: 'مدغشقر', nameEn: 'Madagascar' },
  { code: '265', nameAr: 'ملاوي', nameEn: 'Malawi' },
  { code: '60', nameAr: 'ماليزيا', nameEn: 'Malaysia' },
  { code: '960', nameAr: 'المالديف', nameEn: 'Maldives' },
  { code: '223', nameAr: 'مالي', nameEn: 'Mali' },
  { code: '356', nameAr: 'مالطا', nameEn: 'Malta' },
  { code: '692', nameAr: 'جزر مارشال', nameEn: 'Marshall Islands' },
  { code: '596', nameAr: 'مارتينيك', nameEn: 'Martinique' },
  { code: '222', nameAr: 'موريتانيا', nameEn: 'Mauritania' },
  { code: '230', nameAr: 'موريشيوس', nameEn: 'Mauritius' },
  { code: '262', nameAr: 'مايوت', nameEn: 'Mayotte' },
  { code: '52', nameAr: 'المكسيك', nameEn: 'Mexico' },
  { code: '691', nameAr: 'ميكرونيزيا', nameEn: 'Micronesia' },
  { code: '373', nameAr: 'مولدوفا', nameEn: 'Moldova' },
  { code: '377', nameAr: 'موناكو', nameEn: 'Monaco' },
  { code: '976', nameAr: 'منغوليا', nameEn: 'Mongolia' },
  { code: '382', nameAr: 'الجبل الأسود', nameEn: 'Montenegro' },
  { code: '1664', nameAr: 'مونتسيرات', nameEn: 'Montserrat' },
  { code: '212', nameAr: 'المغرب', nameEn: 'Morocco' },
  { code: '258', nameAr: 'موزمبيق', nameEn: 'Mozambique' },
  { code: '95', nameAr: 'ميانمار', nameEn: 'Myanmar' },
  { code: '264', nameAr: 'ناميبيا', nameEn: 'Namibia' },
  { code: '674', nameAr: 'ناورو', nameEn: 'Nauru' },
  { code: '977', nameAr: 'نيبال', nameEn: 'Nepal' },
  { code: '31', nameAr: 'هولندا', nameEn: 'Netherlands' },
  { code: '687', nameAr: 'كاليدونيا الجديدة', nameEn: 'New Caledonia' },
  { code: '64', nameAr: 'نيوزيلندا', nameEn: 'New Zealand' },
  { code: '505', nameAr: 'نيكاراغوا', nameEn: 'Nicaragua' },
  { code: '227', nameAr: 'النيجر', nameEn: 'Niger' },
  { code: '234', nameAr: 'نيجيريا', nameEn: 'Nigeria' },
  { code: '683', nameAr: 'نيوي', nameEn: 'Niue' },
  { code: '672', nameAr: 'جزيرة نورفولك', nameEn: 'Norfolk Island' },
  { code: '850', nameAr: 'كوريا الشمالية', nameEn: 'North Korea' },
  { code: '1670', nameAr: 'جزر ماريانا الشمالية', nameEn: 'Northern Mariana Islands' },
  { code: '47', nameAr: 'النرويج', nameEn: 'Norway' },
  { code: '968', nameAr: 'عُمان', nameEn: 'Oman' },
  { code: '92', nameAr: 'باكستان', nameEn: 'Pakistan' },
  { code: '680', nameAr: 'بالاو', nameEn: 'Palau' },
  { code: '970', nameAr: 'فلسطين', nameEn: 'Palestine' },
  { code: '507', nameAr: 'بنما', nameEn: 'Panama' },
  { code: '675', nameAr: 'بابوا غينيا الجديدة', nameEn: 'Papua New Guinea' },
  { code: '595', nameAr: 'باراغواي', nameEn: 'Paraguay' },
  { code: '51', nameAr: 'بيرو', nameEn: 'Peru' },
  { code: '63', nameAr: 'الفلبين', nameEn: 'Philippines' },
  { code: '48', nameAr: 'بولندا', nameEn: 'Poland' },
  { code: '351', nameAr: 'البرتغال', nameEn: 'Portugal' },
  { code: '1787', nameAr: 'بورتوريكو', nameEn: 'Puerto Rico' },
  { code: '974', nameAr: 'قطر', nameEn: 'Qatar' },
  { code: '262', nameAr: 'ريونيون', nameEn: 'Réunion' },
  { code: '40', nameAr: 'رومانيا', nameEn: 'Romania' },
  { code: '7', nameAr: 'روسيا', nameEn: 'Russia' },
  { code: '250', nameAr: 'رواندا', nameEn: 'Rwanda' },
  { code: '590', nameAr: 'سان بارتليمي', nameEn: 'Saint Barthélemy' },
  { code: '290', nameAr: 'سانت هيلينا', nameEn: 'Saint Helena' },
  { code: '1869', nameAr: 'سانت كيتس ونيفيس', nameEn: 'Saint Kitts and Nevis' },
  { code: '1758', nameAr: 'سانت لوسيا', nameEn: 'Saint Lucia' },
  { code: '508', nameAr: 'سان بيير وميكلون', nameEn: 'Saint Pierre and Miquelon' },
  { code: '1784', nameAr: 'سانت فينسنت والغرينادين', nameEn: 'Saint Vincent and the Grenadines' },
  { code: '685', nameAr: 'ساموا', nameEn: 'Samoa' },
  { code: '378', nameAr: 'سان مارينو', nameEn: 'San Marino' },
  { code: '239', nameAr: 'ساو تومي وبرينسيبي', nameEn: 'São Tomé and Príncipe' },
  { code: '966', nameAr: 'السعودية', nameEn: 'Saudi Arabia' },
  { code: '221', nameAr: 'السنغال', nameEn: 'Senegal' },
  { code: '381', nameAr: 'صربيا', nameEn: 'Serbia' },
  { code: '248', nameAr: 'سيشل', nameEn: 'Seychelles' },
  { code: '232', nameAr: 'سيراليون', nameEn: 'Sierra Leone' },
  { code: '65', nameAr: 'سنغافورة', nameEn: 'Singapore' },
  { code: '1721', nameAr: 'سينت مارتن', nameEn: 'Sint Maarten' },
  { code: '421', nameAr: 'سلوفاكيا', nameEn: 'Slovakia' },
  { code: '386', nameAr: 'سلوفينيا', nameEn: 'Slovenia' },
  { code: '677', nameAr: 'جزر سليمان', nameEn: 'Solomon Islands' },
  { code: '252', nameAr: 'الصومال', nameEn: 'Somalia' },
  { code: '27', nameAr: 'جنوب أفريقيا', nameEn: 'South Africa' },
  { code: '82', nameAr: 'كوريا الجنوبية', nameEn: 'South Korea' },
  { code: '211', nameAr: 'جنوب السودان', nameEn: 'South Sudan' },
  { code: '34', nameAr: 'إسبانيا', nameEn: 'Spain' },
  { code: '94', nameAr: 'سريلانكا', nameEn: 'Sri Lanka' },
  { code: '249', nameAr: 'السودان', nameEn: 'Sudan' },
  { code: '597', nameAr: 'سورينام', nameEn: 'Suriname' },
  { code: '268', nameAr: 'إسواتيني', nameEn: 'Eswatini' },
  { code: '46', nameAr: 'السويد', nameEn: 'Sweden' },
  { code: '41', nameAr: 'سويسرا', nameEn: 'Switzerland' },
  { code: '963', nameAr: 'سوريا', nameEn: 'Syria' },
  { code: '886', nameAr: 'تايوان', nameEn: 'Taiwan' },
  { code: '992', nameAr: 'طاجيكستان', nameEn: 'Tajikistan' },
  { code: '255', nameAr: 'تنزانيا', nameEn: 'Tanzania' },
  { code: '66', nameAr: 'تايلاند', nameEn: 'Thailand' },
  { code: '670', nameAr: 'تيمور الشرقية', nameEn: 'Timor-Leste' },
  { code: '228', nameAr: 'توغو', nameEn: 'Togo' },
  { code: '690', nameAr: 'توكيلاو', nameEn: 'Tokelau' },
  { code: '676', nameAr: 'تونغا', nameEn: 'Tonga' },
  { code: '1868', nameAr: 'ترينيداد وتوباغو', nameEn: 'Trinidad and Tobago' },
  { code: '216', nameAr: 'تونس', nameEn: 'Tunisia' },
  { code: '90', nameAr: 'تركيا', nameEn: 'Turkey' },
  { code: '993', nameAr: 'تركمانستان', nameEn: 'Turkmenistan' },
  { code: '1649', nameAr: 'جزر تركس وكايكوس', nameEn: 'Turks and Caicos Islands' },
  { code: '688', nameAr: 'توفالو', nameEn: 'Tuvalu' },
  { code: '256', nameAr: 'أوغندا', nameEn: 'Uganda' },
  { code: '380', nameAr: 'أوكرانيا', nameEn: 'Ukraine' },
  { code: '971', nameAr: 'الإمارات', nameEn: 'United Arab Emirates' },
  { code: '44', nameAr: 'بريطانيا', nameEn: 'United Kingdom' },
  { code: '1', nameAr: 'أمريكا', nameEn: 'United States' },
  { code: '598', nameAr: 'أوروغواي', nameEn: 'Uruguay' },
  { code: '998', nameAr: 'أوزبكستان', nameEn: 'Uzbekistan' },
  { code: '678', nameAr: 'فانواتو', nameEn: 'Vanuatu' },
  { code: '379', nameAr: 'الفاتيكان', nameEn: 'Vatican City' },
  { code: '58', nameAr: 'فنزويلا', nameEn: 'Venezuela' },
  { code: '84', nameAr: 'فيتنام', nameEn: 'Vietnam' },
  { code: '1340', nameAr: 'جزر العذراء الأمريكية', nameEn: 'US Virgin Islands' },
  { code: '1284', nameAr: 'جزر العذراء البريطانية', nameEn: 'British Virgin Islands' },
  { code: '681', nameAr: 'واليس وفوتونا', nameEn: 'Wallis and Futuna' },
  { code: '212', nameAr: 'الصحراء الغربية', nameEn: 'Western Sahara' },
  { code: '967', nameAr: 'اليمن', nameEn: 'Yemen' },
  { code: '260', nameAr: 'زامبيا', nameEn: 'Zambia' },
  { code: '263', nameAr: 'زيمبابوي', nameEn: 'Zimbabwe' },
];

/** استخراج رمز الدولة والرقم من رقم هاتف كامل */
export function parsePhoneToCountryAndNumber(phone: string): { code: string; number: string } {
  const digits = (phone || '').replace(/\D/g, '').replace(/^0+/, '');
  if (!digits) return { code: '968', number: '' };
  const sorted = [...COUNTRY_DIAL_CODES].sort((a, b) => b.code.length - a.code.length);
  for (const c of sorted) {
    if (digits.startsWith(c.code)) {
      return { code: c.code, number: digits.slice(c.code.length).replace(/^0+/, '') || digits };
    }
  }
  return { code: '968', number: digits };
}

/** البحث عن رمز الدولة بالاسم (عربي/إنجليزي) أو بالرقم */
export function searchCountryDialCodes(query: string, locale: 'ar' | 'en' = 'ar'): CountryDialCode[] {
  const q = (query || '').trim().toLowerCase();
  if (!q) return COUNTRY_DIAL_CODES;
  const nameKey = locale === 'ar' ? 'nameAr' : 'nameEn';
  return COUNTRY_DIAL_CODES.filter(
    (c) =>
      c.nameAr.toLowerCase().includes(q) ||
      c.nameEn.toLowerCase().includes(q) ||
      c.code.includes(q)
  );
}
